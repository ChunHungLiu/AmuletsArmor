<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Amulets &amp; Armor: VM</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Amulets &amp; Armor
   &#160;<span id="projectnumber">v1.02</span>
   </div>
   <div id="projectbrief">Open Source Game</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">VM</div>  </div>
</div><!--header-->
<div class="contents">

<p>Virtual Memory.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t__vm_data_block.html">T_vmDataBlock</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t__vm_entry.html">T_vmEntry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t__vm_file_info.html">T_vmFileInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t__vm_header.html">T_vmHeader</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t__vm_index.html">T_vmIndex</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga2a089d712b117ad01a6583a9df3fd7ab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga2a089d712b117ad01a6583a9df3fd7ab">VM_BLOCK_ID</a></td></tr>
<tr class="separator:ga2a089d712b117ad01a6583a9df3fd7ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9db77ba790f823178c48f6eb47acde5c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga9db77ba790f823178c48f6eb47acde5c">VM_ENTRY_GROW_SIZE</a>&#160;&#160;&#160;2000</td></tr>
<tr class="separator:ga9db77ba790f823178c48f6eb47acde5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeee5585e4788f9aa73f543484f0a6b28"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#gaeee5585e4788f9aa73f543484f0a6b28">VM_FLAG_DIRTY</a>&#160;&#160;&#160;0x40</td></tr>
<tr class="separator:gaeee5585e4788f9aa73f543484f0a6b28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4562656bdd58d4556fac53c20f54df68"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga4562656bdd58d4556fac53c20f54df68">VM_FLAG_IN_MEMORY</a>&#160;&#160;&#160;0x80</td></tr>
<tr class="separator:ga4562656bdd58d4556fac53c20f54df68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8fde64383fe1ee9a3fbb79675695d600"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga8fde64383fe1ee9a3fbb79675695d600">VM_SEMAPHORE_READ</a>&#160;&#160;&#160;0x20</td></tr>
<tr class="separator:ga8fde64383fe1ee9a3fbb79675695d600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1643457eddfdfca2f1f15bd402602886"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga1643457eddfdfca2f1f15bd402602886">VM_SEMAPHORE_WRITE</a>&#160;&#160;&#160;0x10</td></tr>
<tr class="separator:ga1643457eddfdfca2f1f15bd402602886"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae6dbc0421ef34b7c64a8f9932d58b9e0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#gae6dbc0421ef34b7c64a8f9932d58b9e0">VM_SHIFT_BLOCK_SIZE</a>&#160;&#160;&#160;4000</td></tr>
<tr class="separator:gae6dbc0421ef34b7c64a8f9932d58b9e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga921974639c7040e86ea16dcb7232809f"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="_g_e_n_b_o_r_8_h.html#a5e9fd6b1612e3b88bdfbf12204cc375a">T_byte8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga921974639c7040e86ea16dcb7232809f">F_vmFlags</a></td></tr>
<tr class="separator:ga921974639c7040e86ea16dcb7232809f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga380829e46979d23280890f7bf2dee984"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_g_e_n_b_o_r_8_h.html#a5dca2d9ad7e82130f81a43a8376bdf13">T_word32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga380829e46979d23280890f7bf2dee984">IVMAppendEntry</a> (<a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a> file)</td></tr>
<tr class="separator:ga380829e46979d23280890f7bf2dee984"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6b2b5372c52eebd7cbd24ea8a6ef8735"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga6b2b5372c52eebd7cbd24ea8a6ef8735">IVMCreate</a> (<a class="el" href="struct_t__vm_file_info.html">T_vmFileInfo</a> *p_fileInfo)</td></tr>
<tr class="separator:ga6b2b5372c52eebd7cbd24ea8a6ef8735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9540f12c8bf30f4a2f7bef5aedbd14ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga9540f12c8bf30f4a2f7bef5aedbd14ba">IVMCreateBlockAtEnd</a> (<a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a> file, <a class="el" href="_g_e_n_b_o_r_8_h.html#a5dca2d9ad7e82130f81a43a8376bdf13">T_word32</a> size)</td></tr>
<tr class="separator:ga9540f12c8bf30f4a2f7bef5aedbd14ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3107669f7c73c103db7e7ad2cd0d3096"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga3107669f7c73c103db7e7ad2cd0d3096">IVMFindFreeBlockOfSize</a> (<a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a> file, <a class="el" href="_g_e_n_b_o_r_8_h.html#a5dca2d9ad7e82130f81a43a8376bdf13">T_word32</a> size)</td></tr>
<tr class="separator:ga3107669f7c73c103db7e7ad2cd0d3096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4eebc80b1dde0a28d33e677789dea0ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga4eebc80b1dde0a28d33e677789dea0ee">IVMFindLowestBlock</a> (<a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a> file, <a class="el" href="_g_e_n_b_o_r_8_h.html#a5dca2d9ad7e82130f81a43a8376bdf13">T_word32</a> place)</td></tr>
<tr class="separator:ga4eebc80b1dde0a28d33e677789dea0ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae142f7fde163c9c143a50e3bb0f54ac1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#gae142f7fde163c9c143a50e3bb0f54ac1">IVMFree</a> (<a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a> file, <a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a> block)</td></tr>
<tr class="separator:gae142f7fde163c9c143a50e3bb0f54ac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e6b8d483afa3f937c70ecc2272460a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga5e6b8d483afa3f937c70ecc2272460a5">IVMRelease</a> (<a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a> file, <a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a> block)</td></tr>
<tr class="separator:ga5e6b8d483afa3f937c70ecc2272460a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga11ecd386374f7d29ba7e282e39577fc8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga11ecd386374f7d29ba7e282e39577fc8">IVMSaveIfDirty</a> (<a class="el" href="struct_t__vm_file_info.html">T_vmFileInfo</a> *p_fileInfo, <a class="el" href="struct_t__vm_entry.html">T_vmEntry</a> *p_entry)</td></tr>
<tr class="separator:ga11ecd386374f7d29ba7e282e39577fc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacfd7f484d8a876b074e73acc2c1b5ebb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#gacfd7f484d8a876b074e73acc2c1b5ebb">IVMSaveIndex</a> (<a class="el" href="struct_t__vm_file_info.html">T_vmFileInfo</a> *p_fileInfo)</td></tr>
<tr class="separator:gacfd7f484d8a876b074e73acc2c1b5ebb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26b9fe3113e01704cbbd89457e52f9d9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga26b9fe3113e01704cbbd89457e52f9d9">IVMShiftBlockDown</a> (<a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a> file, <a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a> block, <a class="el" href="_g_e_n_b_o_r_8_h.html#a5dca2d9ad7e82130f81a43a8376bdf13">T_word32</a> *place)</td></tr>
<tr class="separator:ga26b9fe3113e01704cbbd89457e52f9d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga585434757be4b264bd6aa06eb7a08e52"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga585434757be4b264bd6aa06eb7a08e52">IVMTruncate</a> (<a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a> file, <a class="el" href="_g_e_n_b_o_r_8_h.html#a5dca2d9ad7e82130f81a43a8376bdf13">T_word32</a> place)</td></tr>
<tr class="separator:ga585434757be4b264bd6aa06eb7a08e52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga70c523d942143810f850839ca531f320"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga70c523d942143810f850839ca531f320">IVMUpdate</a> (<a class="el" href="struct_t__vm_file_info.html">T_vmFileInfo</a> *p_fileInfo)</td></tr>
<tr class="separator:ga70c523d942143810f850839ca531f320"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga414b190724dce1fd0432347b4fbe01af"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga414b190724dce1fd0432347b4fbe01af">VMAlloc</a> (<a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a> file, <a class="el" href="_g_e_n_b_o_r_8_h.html#a5dca2d9ad7e82130f81a43a8376bdf13">T_word32</a> size)</td></tr>
<tr class="separator:ga414b190724dce1fd0432347b4fbe01af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b86baa24d6d457d3862537bcb9050cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga4b86baa24d6d457d3862537bcb9050cd">VMCleanUp</a> (<a class="el" href="_g_e_n_b_o_r_8_h.html#a5e9fd6b1612e3b88bdfbf12204cc375a">T_byte8</a> *p_filename)</td></tr>
<tr class="separator:ga4b86baa24d6d457d3862537bcb9050cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5b97e85f6a7a673fa1c28be78cdfec8d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga5b97e85f6a7a673fa1c28be78cdfec8d">VMClose</a> (<a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a> file)</td></tr>
<tr class="separator:ga5b97e85f6a7a673fa1c28be78cdfec8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga30cd6bbda3a059c9989b0bb9dacad0b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga30cd6bbda3a059c9989b0bb9dacad0b9">VMDecRefCount</a> (<a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a> file, <a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a> block)</td></tr>
<tr class="separator:ga30cd6bbda3a059c9989b0bb9dacad0b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad342667b894ffa51b02fdc7824b2bcf8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#gad342667b894ffa51b02fdc7824b2bcf8">VMDirty</a> (<a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a> file, <a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a> block)</td></tr>
<tr class="separator:gad342667b894ffa51b02fdc7824b2bcf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf7a5699238e4436fe16c516677c66e4c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_g_e_n_b_o_r_8_h.html#a5eaf95e0d563306d13112ea4d3b0a656">T_word16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#gaf7a5699238e4436fe16c516677c66e4c">VMGetRefCount</a> (<a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a> file, <a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a> block)</td></tr>
<tr class="separator:gaf7a5699238e4436fe16c516677c66e4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26a0a90b46f4bdf4a60db32a96b3d906"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga26a0a90b46f4bdf4a60db32a96b3d906">VMIncRefCount</a> (<a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a> file, <a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a> block)</td></tr>
<tr class="separator:ga26a0a90b46f4bdf4a60db32a96b3d906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf4fcc60002472bd5a2aa53e8ec5d672"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#gabf4fcc60002472bd5a2aa53e8ec5d672">VMLock</a> (<a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a> file, <a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a> block)</td></tr>
<tr class="separator:gabf4fcc60002472bd5a2aa53e8ec5d672"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafbfc6dc9153a51704391496db57a8b4a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#gafbfc6dc9153a51704391496db57a8b4a">VMOpen</a> (<a class="el" href="_g_e_n_b_o_r_8_h.html#a5e9fd6b1612e3b88bdfbf12204cc375a">T_byte8</a> *p_filename)</td></tr>
<tr class="separator:gafbfc6dc9153a51704391496db57a8b4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga765ad7ea6d1d2b6a0dc2c9541aee65b7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_m.html#ga765ad7ea6d1d2b6a0dc2c9541aee65b7">VMUnlock</a> (void *block)</td></tr>
<tr class="separator:ga765ad7ea6d1d2b6a0dc2c9541aee65b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Virtual Memory. </p>
<p>Virtual Memory System &ndash; NOT USED!</p>
<dl class="section see"><dt>See Also</dt><dd><a href="http://www.amuletsandarmor.com/AALicense.txt">http://www.amuletsandarmor.com/AALicense.txt</a> </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga2a089d712b117ad01a6583a9df3fd7ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VM_BLOCK_ID</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">((((<a class="code" href="_g_e_n_b_o_r_8_h.html#a5dca2d9ad7e82130f81a43a8376bdf13">T_word32</a>)<span class="charliteral">&#39;V&#39;</span>)&lt;&lt;0) | \</div>
<div class="line">                    (((<a class="code" href="_g_e_n_b_o_r_8_h.html#a5dca2d9ad7e82130f81a43a8376bdf13">T_word32</a>)<span class="charliteral">&#39;m&#39;</span>)&lt;&lt;8) | \</div>
<div class="line">                    (((<a class="code" href="_g_e_n_b_o_r_8_h.html#a5dca2d9ad7e82130f81a43a8376bdf13">T_word32</a>)<span class="charliteral">&#39;B&#39;</span>)&lt;&lt;16))</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga9db77ba790f823178c48f6eb47acde5c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VM_ENTRY_GROW_SIZE&#160;&#160;&#160;2000</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="gaeee5585e4788f9aa73f543484f0a6b28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VM_FLAG_DIRTY&#160;&#160;&#160;0x40</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga4562656bdd58d4556fac53c20f54df68"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VM_FLAG_IN_MEMORY&#160;&#160;&#160;0x80</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga8fde64383fe1ee9a3fbb79675695d600"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VM_SEMAPHORE_READ&#160;&#160;&#160;0x20</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga1643457eddfdfca2f1f15bd402602886"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VM_SEMAPHORE_WRITE&#160;&#160;&#160;0x10</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="gae6dbc0421ef34b7c64a8f9932d58b9e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VM_SHIFT_BLOCK_SIZE&#160;&#160;&#160;4000</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga921974639c7040e86ea16dcb7232809f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="_g_e_n_b_o_r_8_h.html#a5e9fd6b1612e3b88bdfbf12204cc375a">T_byte8</a> <a class="el" href="group___v_m.html#ga921974639c7040e86ea16dcb7232809f">F_vmFlags</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga380829e46979d23280890f7bf2dee984"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_g_e_n_b_o_r_8_h.html#a5dca2d9ad7e82130f81a43a8376bdf13">T_word32</a> IVMAppendEntry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a>&#160;</td>
          <td class="paramname"><em>file</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>IVMAppendEntry adds another entry at the bottom of the index.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>&ndash; File to append an entry. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga6b2b5372c52eebd7cbd24ea8a6ef8735"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a> IVMCreate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t__vm_file_info.html">T_vmFileInfo</a> *&#160;</td>
          <td class="paramname"><em>p_fileInfo</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>IVMCreate opens up a new vm file and vm records file. Any previous data is lost.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fileInfo</td><td>&ndash; Pointer to file info structure to create. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga9540f12c8bf30f4a2f7bef5aedbd14ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a> IVMCreateBlockAtEnd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_g_e_n_b_o_r_8_h.html#a5dca2d9ad7e82130f81a43a8376bdf13">T_word32</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>IVMCreateBlockAtEnd assumes that the best place for a new block is at the end of the records file (and at the end of the index). A new block is created there.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>&ndash; File to append block to </td></tr>
    <tr><td class="paramname">size</td><td>&ndash; Size of block </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga3107669f7c73c103db7e7ad2cd0d3096"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a> IVMFindFreeBlockOfSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_g_e_n_b_o_r_8_h.html#a5dca2d9ad7e82130f81a43a8376bdf13">T_word32</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>IVMFindFreeBlockOfSize searches for the first block that meets the given size requirement. In addition, it splits the blocks accordingly.</p>
<p>NOTE: Based on the way this routine works, it is fast, but causes alot of fragmentation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>&ndash; File to search for block within </td></tr>
    <tr><td class="paramname">size</td><td>&ndash; Size to find </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga4eebc80b1dde0a28d33e677789dea0ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a> IVMFindLowestBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_g_e_n_b_o_r_8_h.html#a5dca2d9ad7e82130f81a43a8376bdf13">T_word32</a>&#160;</td>
          <td class="paramname"><em>place</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>IVMFindLowestBlock searches the index to find the lowest block that is above the given file offset. If none is found, a zero is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>&ndash; File to release block within </td></tr>
    <tr><td class="paramname">place</td><td>&ndash; Place in VM </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gae142f7fde163c9c143a50e3bb0f54ac1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a> IVMFree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a>&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>IVMFree takes a originally reference allocated block and frees it and puts it on the linked list of free blocks.</p>
<p>NOTE: Obviously you should not call this on an already freed block.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>&ndash; File to free block within </td></tr>
    <tr><td class="paramname">block</td><td>&ndash; Block that is being freed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga5e6b8d483afa3f937c70ecc2272460a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a> IVMRelease </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a>&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>IVMRelease makes a block that was in memory be released to disk (and saves if necessary).</p>
<p>NOTE: Obviously you should not call this on an already freed block.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>&ndash; File to release block within </td></tr>
    <tr><td class="paramname">block</td><td>&ndash; Block that is being released </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga11ecd386374f7d29ba7e282e39577fc8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a> IVMSaveIfDirty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t__vm_file_info.html">T_vmFileInfo</a> *&#160;</td>
          <td class="paramname"><em>p_fileInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t__vm_entry.html">T_vmEntry</a> *&#160;</td>
          <td class="paramname"><em>p_entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>IVMSaveIfDirty checks the given block if is dirty, and if so, saves it to disk. Otherwise, nothing happens.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fileInfo</td><td>&ndash; Pointer to the file information struct </td></tr>
    <tr><td class="paramname">p_entry</td><td>&ndash; Pointer to entry to check to save </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gacfd7f484d8a876b074e73acc2c1b5ebb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a> IVMSaveIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t__vm_file_info.html">T_vmFileInfo</a> *&#160;</td>
          <td class="paramname"><em>p_fileInfo</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>IVMSaveIndex saves the index file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fileInfo</td><td>&ndash; Pointer to the file information struct </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga26b9fe3113e01704cbbd89457e52f9d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a> IVMShiftBlockDown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a>&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_g_e_n_b_o_r_8_h.html#a5dca2d9ad7e82130f81a43a8376bdf13">T_word32</a> *&#160;</td>
          <td class="paramname"><em>place</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>IVMShiftBlockDown moves a vm block within the records file to the given place. The byte after the block is also returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>&ndash; File to shift block within </td></tr>
    <tr><td class="paramname">block</td><td>&ndash; Block to shift </td></tr>
    <tr><td class="paramname">place</td><td>&ndash; Place to shift down to (and variable to record end of block). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga585434757be4b264bd6aa06eb7a08e52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a> IVMTruncate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_g_e_n_b_o_r_8_h.html#a5dca2d9ad7e82130f81a43a8376bdf13">T_word32</a>&#160;</td>
          <td class="paramname"><em>place</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>IVMTruncate clips the end of the vm file so that the file takes up less disk space.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>&ndash; File to truncate </td></tr>
    <tr><td class="paramname">place</td><td>&ndash; where to truncate the file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga70c523d942143810f850839ca531f320"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a> IVMUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t__vm_file_info.html">T_vmFileInfo</a> *&#160;</td>
          <td class="paramname"><em>p_fileInfo</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>IVMUpdate saves all dirty records, mark them as clean, and then saves the whole index.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fileInfo</td><td>&ndash; Pointer to file info structure to update. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga414b190724dce1fd0432347b4fbe01af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a> VMAlloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_g_e_n_b_o_r_8_h.html#a5dca2d9ad7e82130f81a43a8376bdf13">T_word32</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>VMAlloc does all the work of finding a block of the given size in the current virtual memory file. If no space can be found, a VM_BLOCK_BAD is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>&ndash; File to allocate vm block within </td></tr>
    <tr><td class="paramname">size</td><td>&ndash; Size to make the vm block</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>block handle to block, or VM_BLOCK_BAD </dd></dl>

</div>
</div>
<a class="anchor" id="ga4b86baa24d6d457d3862537bcb9050cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a> VMCleanUp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_g_e_n_b_o_r_8_h.html#a5e9fd6b1612e3b88bdfbf12204cc375a">T_byte8</a> *&#160;</td>
          <td class="paramname"><em>p_filename</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>From time to time, files will become 'pitted' with free blocks that nothing will use. When this happens, all the free spots need to be compressed and expulged. All free spots are removed and everything is relocated correctly. Major files should have this routine called on them at least once a day. Note that this routine should only be called on FULLY CLOSED vm files. If you don't the file will be destroyed since two versions will exist (one in memory, one on disk).</p>
<p>NOTE: The VM file that is being cleaned-up should NOT be opened at this time. No checks are made to confirm this.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_filename</td><td>&ndash; Name of file to clean-up </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga5b97e85f6a7a673fa1c28be78cdfec8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a> VMClose </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a>&#160;</td>
          <td class="paramname"><em>file</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>VMClose closes out all of the records opened (but waiting to be written). All corresponding junk that is not needed is cleared from memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>&ndash; File that is to be closed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga30cd6bbda3a059c9989b0bb9dacad0b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a> VMDecRefCount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a>&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>VMDecRefCount decrements the count of references to this block. This number is very important since it tells whether or not the block is free. Accurate reference counts is a must. Note that newly VMAlloc'd blocks start with a reference count of 1. A reference count of 0 is a free block.</p>
<p>NOTE: VMDecRefCount may destroy all data related to the block if the reference count goes to zero. Make VMDecRefCount the last action performed on any block.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>&ndash; File containing vm block to decrement </td></tr>
    <tr><td class="paramname">block</td><td>&ndash; Block to decrement in vm file. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gad342667b894ffa51b02fdc7824b2bcf8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a> VMDirty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a>&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>VMDirty marks a block dirty so the block is saved to disk. Otherwise, the block is never saved and any changes are lost.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>&ndash; File containing newly dirty block </td></tr>
    <tr><td class="paramname">block</td><td>&ndash; Block in file to mark dirty </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaf7a5699238e4436fe16c516677c66e4c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_g_e_n_b_o_r_8_h.html#a5eaf95e0d563306d13112ea4d3b0a656">T_word16</a> VMGetRefCount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a>&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>VMGetRefCount returns the number of references to this block.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>&ndash; File containing vm block to decrement </td></tr>
    <tr><td class="paramname">block</td><td>&ndash; Block to decrement in vm file. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga26a0a90b46f4bdf4a60db32a96b3d906"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a> VMIncRefCount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a>&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>VMIncRefCount increments the count of references to this block. This number is very important since it tells whether or not the block is free. Accurate reference counts is a must. Note that newly VMAlloc'd blocks start with a reference count of 1.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>&ndash; File containing vm block to increment </td></tr>
    <tr><td class="paramname">block</td><td>&ndash; Block to increment in vm file. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gabf4fcc60002472bd5a2aa53e8ec5d672"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* VMLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a>&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_v_m_8_h.html#a7b0ca70f87d250eaef70116bdc767e8d">T_vmBlock</a>&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>VMLock is used to retrieve a block from the vm file. In addition, semaphoring is done to check for read/write access priviledges. A block can be locked with a semaphore on reading or writing. If locked for writing semaphore, no other locking actions for write access are allowed. If the lock requests read priviledge, but the block is locked with read semaphored, then the lock is stopped. In addition, a flag is added to allow for thread blocking. If TRUE, the calling will wait until the block is free. If FALSE, the calling process will not wait and will not return with a block pointer.</p>
<p>NOTE: In this current version, the routine does not make memory write protected even though the semaphores may request read only. It is up to the programmer to make sure read and writes are appropriate to the semaphore accesses.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>&ndash; File containing vm block to decrement </td></tr>
    <tr><td class="paramname">block</td><td>&ndash; Block to decrement in vm file.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to data block, or NULL </dd></dl>

</div>
</div>
<a class="anchor" id="gafbfc6dc9153a51704391496db57a8b4a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_v_m_8_h.html#a404cee957a570764d883eda9b1b8a6ef">T_vmFile</a> VMOpen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_g_e_n_b_o_r_8_h.html#a5e9fd6b1612e3b88bdfbf12204cc375a">T_byte8</a> *&#160;</td>
          <td class="paramname"><em>p_filename</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>VMOpen opens a file for VM file access. If the file does not exist, it is created. Minimal setup is used when first created. Pass to this routine the filename WITHOUT an extension. A .idx postfix is added for the index and A .rec postfix is added for the records file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_filename</td><td>&ndash; File to open for VM access.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>File that was opened. </dd></dl>

</div>
</div>
<a class="anchor" id="ga765ad7ea6d1d2b6a0dc2c9541aee65b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_g_e_n_b_o_r_8_h.html#a4a22d50a7b5042f5c0b7c30b3937289b">T_void</a> VMUnlock </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>block</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>VMUnlock releases the vm block from memory. If multiple locks have been executed, an equal number of unlocks must be performed to remove the block from memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">block</td><td>&ndash; Pointer to block previously locked </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 4 2013 15:35:48 for Amulets & Armor by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
